<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; img-src 'self' data: https: file:; style-src 'self' 'unsafe-inline'; script-src 'self';"
    />
    <title>Steam Syncer</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app">
      <aside class="sidebar">
        <div class="brand">
          <span class="brand-dot"></span>
          <div>
            <div class="brand-title">Steam Syncer</div>
            <div class="brand-sub">Repacks Library</div>
          </div>
        </div>
        <nav class="nav">
          <button class="nav-item active" data-view="dashboard">
            <span class="nav-icon">
              <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 11.5L12 4l8 7.5V20a1 1 0 0 1-1 1h-5v-6H10v6H5a1 1 0 0 1-1-1v-8.5z" /></svg>
            </span>
            Dashboard
          </button>
          <button class="nav-item" data-view="library">
            <span class="nav-icon">
              <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 5h10a2 2 0 0 1 2 2v9a3 3 0 0 1-3 3H8a3 3 0 0 1-3-3V7a2 2 0 0 1 2-2zm0 3v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V8H7zm2 7h6v-2H9v2z" /></svg>
            </span>
            Library
          </button>
          <button class="nav-item" data-view="overrides">
            <span class="nav-icon">
              <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 3a4 4 0 0 1 4 4v1h1a4 4 0 0 1 4 4v2a4 4 0 0 1-4 4h-1v1a4 4 0 0 1-8 0v-1H7a4 4 0 0 1-4-4v-2a4 4 0 0 1 4-4h1V7a4 4 0 0 1 4-4zm-2 6h4V7a2 2 0 0 0-4 0v2zm4 10H10v-2H8a2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-2v2z" /></svg>
            </span>
            Overrides
          </button>
          <button class="nav-item" data-view="settings">
            <span class="nav-icon">
              <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 8.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7zm8.2 3.2-.9-.3a7.5 7.5 0 0 0-.8-1.8l.5-.8a1 1 0 0 0-.1-1.2l-1.4-1.4a1 1 0 0 0-1.2-.1l-.8.5a7.5 7.5 0 0 0-1.8-.8l-.3-.9a1 1 0 0 0-1-.7h-2a1 1 0 0 0-1 .7l-.3.9a7.5 7.5 0 0 0-1.8.8l-.8-.5a1 1 0 0 0-1.2.1L4.1 6.6a1 1 0 0 0-.1 1.2l.5.8a7.5 7.5 0 0 0-.8 1.8l-.9.3a1 1 0 0 0-.7 1v2a1 1 0 0 0 .7 1l.9.3a7.5 7.5 0 0 0 .8 1.8l-.5.8a1 1 0 0 0 .1 1.2l1.4 1.4a1 1 0 0 0 1.2.1l.8-.5a7.5 7.5 0 0 0 1.8.8l.3.9a1 1 0 0 0 1 .7h2a1 1 0 0 0 1-.7l.3-.9a7.5 7.5 0 0 0 1.8-.8l.8.5a1 1 0 0 0 1.2-.1l1.4-1.4a1 1 0 0 0 .1-1.2l-.5-.8a7.5 7.5 0 0 0 .8-1.8l.9-.3a1 1 0 0 0 .7-1v-2a1 1 0 0 0-.7-1z" /></svg>
            </span>
            Settings
          </button>
        </nav>
      </aside>

      <main class="content">
        <header class="topbar">
          <div class="topbar-left">
            <div class="nav-buttons">
              <button id="navBack" class="btn ghost icon-only" title="Back">
                <span class="icon">
                  <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M15.5 4 7 12l8.5 8v-5.5H23v-5H15.5z" /></svg>
                </span>
              </button>
              <button id="navForward" class="btn ghost icon-only" title="Forward">
                <span class="icon">
                  <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M8.5 4 17 12l-8.5 8v-5.5H1v-5h7.5z" /></svg>
                </span>
              </button>
            </div>
            <div>
              <h1 id="pageTitle">Dashboard</h1>
              <p id="pageSubtitle">Local games sync status and activity.</p>
            </div>
          </div>
          <div class="actions">
            <button id="syncBtn" class="btn primary">
              <span class="icon">
                <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6 8h12l-2.5-3H18a8 8 0 1 1-8 8H8a10 10 0 1 0 10-10h-2.5L18 0H6l2 3H6v5z" /></svg>
              </span>
              Run Sync
            </button>
            <button id="launchBtn" class="btn ghost">
              <span class="icon">
                <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 5h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2zm3 3v8l6-4-6-4z" /></svg>
              </span>
              Launch Steam
            </button>
            <button id="launchBigPictureBtn" class="btn ghost">
              <span class="icon">
                <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 5h18v14H3V5zm2 2v10h14V7H5zm4 1h6l-2 3 2 3H9l2-3-2-3z" /></svg>
              </span>
              Big Picture
            </button>
          </div>
        </header>

        <section class="view active" data-view="dashboard">
          <div class="grid-4">
            <div class="card">
              <div class="card-title">Status</div>
              <div class="status-row">
                <span class="status-dot" id="statusIndicator"></span>
                <span id="statusText">Ready.</span>
              </div>
            </div>
            <div class="card">
              <div class="card-title">Last Sync</div>
              <div class="card-value" id="lastSync">Never</div>
            </div>
            <div class="card">
              <div class="card-title">Detected</div>
              <div class="card-value" id="found">0</div>
            </div>
            <div class="card">
              <div class="card-title">Added</div>
              <div class="card-value" id="added">0</div>
            </div>
          </div>

          <div class="split">
            <div class="card">
              <div class="card-title">Sync Summary</div>
              <div class="summary">
                <div class="summary-item">
                  <span>Total Detected</span>
                  <strong id="totalDetected">0</strong>
                </div>
                <div class="summary-item">
                  <span>Overrides</span>
                  <strong id="overrideCount">0</strong>
                </div>
                <div class="summary-item">
                  <span>Pending Artwork</span>
                  <strong id="pendingArtwork">0</strong>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-title">Recent Activity</div>
              <div class="activity" id="activityLog"></div>
            </div>
          </div>
        </section>

        <section class="view" data-view="library">
          <div class="library-header">
            <div>
              <h2>Library</h2>
              <p>Browse detected games and metadata.</p>
            </div>
            <div class="library-tools">
              <div class="search">
                <input id="librarySearch" type="text" placeholder="Search local library..." />
              </div>
              <div class="pill">Local</div>
            </div>
          </div>

          <div class="library-hero" id="libraryHero">
            <div class="library-hero__content">
              <div class="library-hero__badge">Last Played</div>
              <div class="library-hero__title" id="heroTitle">No recent game</div>
              <div class="library-hero__meta" id="heroMeta">Select a game to view details.</div>
              <div class="library-hero__actions">
                <button id="heroViewDetails" class="btn small ghost">View Details</button>
              </div>
            </div>
            <div class="library-hero__icon" id="heroIcon"></div>
          </div>

          <div class="library-section">
            <div class="section-header">
              <h3>Most Popular</h3>
              <button id="seeAllBtn" class="link-btn">See all</button>
            </div>
            <div class="carousel" id="libraryCarousel"></div>
          </div>

          <div class="library-section hidden" id="libraryGridWrap">
            <div class="section-header">
              <h3>All Games</h3>
            </div>
            <div class="library-grid" id="libraryGrid"></div>
          </div>
        </section>

        <section class="view" data-view="game">
          <div class="game-page">
            <div class="game-hero" id="detailHero">
              <div class="game-hero__overlay">
                <div class="game-hero__title" id="detailName">Game</div>
                <div class="game-hero__sub" id="detailSource">Source</div>
                <div class="game-hero__actions">
                  <button id="editOverrideFromDetail" class="btn small ghost">Edit Launch Override</button>
                </div>
              </div>
            </div>

            <div class="game-meta-grid">
              <div class="game-meta-card">
                <div class="detail-label">AppID</div>
                <div class="detail-value" id="detailAppId">-</div>
              </div>
              <div class="game-meta-card">
                <div class="detail-label">Executable</div>
                <div class="detail-value" id="detailExe">-</div>
              </div>
              <div class="game-meta-card">
                <div class="detail-label">Start Dir</div>
                <div class="detail-value" id="detailStartDir">-</div>
              </div>
              <div class="game-meta-card">
                <div class="detail-label">Launch Options</div>
                <div class="detail-value" id="detailArgs">-</div>
              </div>
              <div class="game-meta-card">
                <div class="detail-label">Last Played</div>
                <div class="detail-value" id="detailLastPlayed">-</div>
              </div>
              <div class="game-meta-card">
                <div class="detail-label">Artwork</div>
                <div class="detail-value" id="detailArtwork">-</div>
              </div>
            </div>

            <div class="game-info-grid">
              <div class="info-card">
                <div class="card-title">Ratings</div>
                <div class="info-value" id="detailRatings">Not available for non-Steam games</div>
              </div>
              <div class="info-card">
                <div class="card-title">Reviews</div>
                <div class="info-value" id="detailReviews">Not available for non-Steam games</div>
              </div>
              <div class="info-card">
                <div class="card-title">Guides</div>
                <div class="info-value" id="detailGuides">Not available for non-Steam games</div>
              </div>
              <div class="info-card">
                <div class="card-title">Community</div>
                <div class="info-value" id="detailCommunity">Not available for non-Steam games</div>
              </div>
            </div>
          </div>
        </section>

        <section class="view" data-view="overrides">
          <div class="panel-header">
            <h2>Launch Overrides</h2>
            <div class="panel-actions">
              <button id="refreshGames" class="btn small">Refresh</button>
            </div>
          </div>
          <div id="overrideList" class="override-list"></div>
          <div id="overrideEditor" class="override-editor hidden">
            <h3 id="overrideTitle">Edit Launch Override</h3>
            <label class="field">
              <span>Display Name</span>
              <input id="overrideName" type="text" />
            </label>
            <label class="field">
              <span>Executable</span>
              <div class="field-inline">
                <input id="overrideExe" type="text" />
                <button id="pickExe" class="btn small ghost" type="button">Pick</button>
              </div>
            </label>
            <label class="field">
              <span>Start Dir</span>
              <div class="field-inline">
                <input id="overrideDir" type="text" />
                <button id="pickDir" class="btn small ghost" type="button">Pick</button>
              </div>
            </label>
            <label class="field">
              <span>Launch Options</span>
              <input id="overrideArgs" type="text" placeholder="Optional" />
            </label>
            <div class="override-actions">
              <button id="saveOverride" class="btn small">Save Override</button>
              <button id="clearOverride" class="btn small ghost">Clear Override</button>
            </div>
          </div>
        </section>

        <section class="view" data-view="settings">
          <div class="settings-grid">
            <div class="card">
              <div class="card-title">SteamGridDB</div>
              <label class="field">
                <span>API Key</span>
                <div class="field-inline">
                  <input id="apiKey" type="password" placeholder="Paste API key" />
                  <button id="toggleApiKey" class="btn small ghost" type="button">Show</button>
                </div>
              </label>
              <div class="actions">
                <button id="saveSettings" class="btn small">Save Settings</button>
                <button id="openLogs" class="btn small ghost">Open Logs</button>
              </div>
            </div>
            <div class="card">
              <div class="card-title">Scan Folders</div>
              <div class="panel-actions">
                <button id="addFolder" class="btn small">Add Folder</button>
              </div>
              <div class="folder-list" id="folderList"></div>
              <label class="toggle">
                <input id="knownStores" type="checkbox" />
                <span>Include known store folders (Epic, GOG)</span>
              </label>
            </div>
          </div>
        </section>
      </main>
    </div>

    <script src="renderer.js"></script>
  </body>
</html>
